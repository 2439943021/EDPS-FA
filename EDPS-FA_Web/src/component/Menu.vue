<template>
  <div class="container">
    <!-- 导航栏 -->
    <div class="menu-container">
      <div class="logo" v-if="screenSize >= 600">
        <!-- <img src="../assets/img/MedSeeker.jpg" alt="Logo" /> -->
        <img src="https://medseeker.genemed.tech/ask/report_css/logo.jpg" style="width: 100%;"/>
      </div>
      <el-menu :default-active="currentPath" class="el-menu" mode="horizontal" router>
        <!-- 使用 v-if 控制在屏幕尺寸大于等于 600px 时显示 Logo -->
        <!-- <div class="logo" v-if="screenSize >= 600">
          <img src="../assets/img/MedSeeker.jpg" alt="Logo" />
        </div> -->
        <!-- <el-menu-item index="/submitfortest/submitbypmid">{{ "提交检测" }}</el-menu-item>
        <el-menu-item index="/result">{{ "报告列表" }}</el-menu-item>
        <el-menu-item index="/example">{{ "模板列表" }}</el-menu-item>
        <el-menu-item index="/report">{{ "报告导出" }}</el-menu-item>
        <el-menu-item index="/favorites">{{ "收藏夹" }}</el-menu-item>
        <el-menu-item index="/connect">{{ "联系我们" }}</el-menu-item> -->
 
        <el-menu-item style="font-size: 20px; font-weight: bolder;" index="/submitfortest/submitbypmid"><el-icon><Search /></el-icon>{{ $t('messages.submit') }}</el-menu-item>
        <el-menu-item style="font-size: 20px; font-weight: bolder;" index="/result"><el-icon><Document /></el-icon>{{ $t('messages.report') }}</el-menu-item>
        <el-menu-item style="font-size: 20px; font-weight: bolder;" index="/example"><el-icon><MessageBox /></el-icon>{{ $t('messages.template') }}</el-menu-item>
        <!-- <el-menu-item index="/report">{{ $t('messages.output') }}</el-menu-item> -->
        <el-menu-item style="font-size: 20px; font-weight: bolder;" index="/favorites"><el-icon><Star /></el-icon>{{ $t('messages.favorites') }}</el-menu-item>
        <!-- <el-menu-item index="/connect">{{ $t('messages.connect') }}</el-menu-item> -->
        <el-menu-item style="font-size: 20px; font-weight: bolder;" index="/connect"><el-icon><Help /></el-icon>{{ $t('messages.help') }}</el-menu-item>
      </el-menu>
    </div>
    <div style="display: flex;">
      <!-- 语言选择 -->
      <div class="selecLanguage">
        <el-dropdown>
          <el-button :circle="true" class="rounded-button">
            <svg t="1727512050798" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
              p-id="4395" width="32" height="32">
              <path
                d="M534.987755 908.538776l18.808163-1.567347c1.567347 0 3.134694-0.522449 5.22449-0.522449 4.702041-0.522449 9.404082-1.044898 14.106123-2.089796 84.636735-13.061224 162.481633-52.767347 223.085714-115.461225 48.587755-50.155102 82.546939-110.759184 99.787755-176.587755 0-0.522449 0-1.044898 0.522449-1.567347 1.567347-5.22449 2.612245-10.971429 3.657143-16.718367 0-1.044898 0.522449-2.089796 0.522449-3.134694 1.044898-5.22449 2.089796-10.44898 2.612245-15.15102 0-1.567347 0.522449-2.612245 0.522449-4.179592 0.522449-4.702041 1.044898-9.404082 2.089796-14.628572 0-1.567347 0.522449-3.657143 0.522449-5.22449 0.522449-4.702041 1.044898-9.404082 1.044898-14.628571 0-1.567347 0.522449-3.657143 0.522449-5.22449 0.522449-6.791837 0.522449-13.061224 0.522449-19.853061s0-13.583673-0.522449-19.853061c0-1.567347-0.522449-3.657143-0.522449-5.22449-0.522449-4.702041-0.522449-9.926531-1.044898-14.628571 0-1.567347-0.522449-3.657143-0.522449-5.22449-0.522449-4.702041-1.044898-9.404082-2.089796-14.628572 0-1.567347-0.522449-2.612245-0.522449-4.179592-1.044898-5.22449-1.567347-10.44898-2.612245-15.15102 0-1.044898-0.522449-2.089796-0.522449-3.134694-1.044898-5.746939-2.612245-10.971429-3.657143-16.718367 0-0.522449 0-1.044898-0.522449-1.567347-17.240816-65.828571-51.2-126.955102-99.787755-176.587755-61.126531-62.693878-138.44898-102.4-223.085714-115.461225-4.702041-0.522449-9.404082-1.044898-14.106123-2.089796-1.567347 0-3.134694-0.522449-5.22449-0.522449l-18.808163-1.567347h-0.522449c-6.269388-0.522449-13.061224-0.522449-19.330612-0.522448h-10.971429c-6.269388 0-13.061224 0.522449-19.330612 1.044897h-0.522449l-18.808163 1.567347h-1.567347c-5.746939 0.522449-11.493878 1.567347-17.240816 2.612245-1.044898 0-2.612245 0.522449-3.657143 0.522449-4.702041 1.044898-9.926531 1.567347-14.628572 2.612245-2.612245 0.522449-4.702041 1.044898-6.791836 1.567347-3.657143 1.044898-7.314286 1.567347-10.971429 2.612245l-10.971429 3.134694c-2.089796 0.522449-4.179592 1.044898-6.791836 2.089796-5.22449 1.567347-10.44898 3.657143-15.67347 5.22449-0.522449 0-1.044898 0.522449-1.567347 0.522449-55.379592 20.897959-106.057143 53.289796-147.853061 96.653061-48.587755 50.155102-82.546939 110.759184-99.787755 176.587755 0 0.522449 0 1.044898-0.522449 1.567347-1.567347 5.22449-2.612245 10.971429-3.657143 16.718367 0 1.044898-0.522449 2.089796-0.522449 3.134694-1.044898 5.22449-2.089796 10.44898-2.612245 15.15102 0 1.567347-0.522449 2.612245-0.522449 4.179592-0.522449 4.702041-1.044898 9.404082-2.089796 14.628572 0 1.567347-0.522449 3.657143-0.522449 5.22449-0.522449 4.702041-1.044898 9.404082-1.044898 14.628571 0 1.567347-0.522449 3.657143-0.522449 5.22449-1.044898 6.269388-1.044898 13.061224-1.044897 19.853061s0 13.583673 0.522448 19.853061c0 1.567347 0.522449 3.657143 0.522449 5.22449 0.522449 4.702041 0.522449 9.926531 1.044898 14.628571 0 1.567347 0.522449 3.657143 0.522449 5.22449 0.522449 4.702041 1.044898 9.404082 2.089796 14.628572 0 1.567347 0.522449 2.612245 0.522449 4.179592 1.044898 5.22449 1.567347 10.44898 2.612245 15.15102 0 1.044898 0.522449 2.089796 0.522449 3.134694 1.044898 5.746939 2.612245 10.971429 3.657143 16.718367 0 0.522449 0 1.044898 0.522449 1.567347 17.240816 65.828571 51.2 126.955102 99.787755 176.587755 42.318367 43.363265 92.473469 75.755102 147.853061 96.130612 0.522449 0 1.567347 0.522449 2.089796 0.522449 5.22449 2.089796 10.44898 3.657143 15.151021 5.22449 2.089796 0.522449 4.702041 1.567347 6.791836 2.089796l10.971429 3.134694c3.657143 1.044898 7.314286 2.089796 10.971429 2.612245 2.089796 0.522449 4.702041 1.044898 6.791836 1.567347 4.702041 1.044898 9.926531 2.089796 14.628572 2.612245 1.044898 0 2.612245 0.522449 3.657143 0.522449 5.746939 1.044898 11.493878 1.567347 17.240816 2.612245h1.567347l18.808163 1.567347h0.522449c6.269388 0.522449 12.538776 0.522449 19.330612 1.044898h11.493878c6.269388 0 13.061224 0 19.330612-0.522449l0.522449 0.522449z"
                fill="#7BD4EF" p-id="4396"></path>
              <path
                d="M447.216327 859.428571c-3.134694-0.522449-6.269388-1.044898-8.881633-1.567347-4.179592-1.044898-8.881633-2.089796-13.061225-3.134693-1.567347-0.522449-3.134694-1.044898-4.70204-1.044898-3.657143-1.044898-7.836735-2.089796-11.493878-3.134694-1.044898-0.522449-2.089796-0.522449-3.134694-1.044898-49.632653-15.673469-95.085714-42.318367-132.702041-76.8 24.555102-22.987755 52.244898-41.795918 82.546939-56.42449 22.987755 52.767347 55.379592 101.877551 94.563265 144.195918-1.044898-1.044898-2.089796-1.044898-3.134693-1.044898z m-272.718368-242.416326l-4.702041-15.673469c0-0.522449-0.522449-1.044898-0.522449-1.567347-1.044898-4.702041-2.089796-9.926531-3.134693-14.628572 0-1.044898-0.522449-1.567347-0.522449-2.612245-1.044898-4.702041-1.567347-8.881633-2.612245-13.583673 0-1.567347-0.522449-2.612245-0.522449-4.179592l-1.567347-12.538776c0-1.567347-0.522449-3.134694-0.522449-4.70204-0.522449-4.179592-0.522449-8.359184-1.044898-13.061225v-3.134694h154.644898c2.089796 50.155102 10.971429 99.787755 27.689796 146.808164-35.004082 16.718367-66.873469 38.661224-95.608164 65.306122-31.869388-36.04898-56.42449-78.889796-71.57551-126.432653z m-14.106122-140.538776c0-1.567347 0.522449-3.134694 0.522449-4.70204l1.567347-12.538776c0-1.567347 0.522449-2.612245 0.522449-4.179592 0.522449-4.702041 1.567347-8.881633 2.612245-13.583673 0-1.044898 0.522449-2.089796 0.522449-2.612245 1.044898-4.702041 2.089796-9.926531 3.134693-14.628572 0-0.522449 0.522449-1.044898 0.522449-1.567347 1.567347-5.22449 2.612245-10.44898 4.702041-15.673469C189.64898 359.444898 214.204082 316.604082 245.55102 280.032653c28.734694 26.644898 60.604082 48.065306 95.608164 65.306123-16.195918 47.542857-25.6 96.653061-27.689796 146.808163H159.346939v-3.134694c0.522449-4.179592 0.522449-8.359184 1.044898-12.538776z m245.55102-301.453061c1.044898-0.522449 2.089796-0.522449 3.134694-1.044898 4.179592-1.044898 7.836735-2.089796 12.016327-3.657143 1.567347-0.522449 2.612245-1.044898 4.179591-1.044898 4.179592-1.044898 8.881633-2.089796 13.583674-3.134693 3.134694-0.522449 5.746939-1.044898 8.881633-1.567347 1.044898 0 2.089796-0.522449 3.134693-0.522449-40.228571 42.840816-72.097959 91.428571-95.608163 144.718367-29.779592-14.628571-57.469388-33.959184-82.546939-56.42449 38.138776-35.004082 83.069388-61.64898 133.22449-77.322449z m176.587755-8.881632h1.044898c63.738776 13.061224 120.685714 43.363265 167.183674 85.681632-26.122449 24.032653-54.857143 43.363265-86.204082 58.514286-23.510204-54.334694-55.902041-103.967347-96.653061-147.330612 5.22449 1.044898 9.926531 2.089796 14.628571 3.134694z m266.971429 240.848979l4.702041 15.673469c0 0.522449 0.522449 1.044898 0.522449 1.567347 1.044898 4.702041 2.089796 9.926531 3.134693 14.628572 0 1.044898 0.522449 1.567347 0.522449 2.612245 1.044898 4.702041 1.567347 8.881633 2.612245 13.583673 0 1.567347 0.522449 2.612245 0.522449 4.179592l1.567347 12.538776c0 1.567347 0.522449 3.134694 0.522449 4.70204 0.522449 4.179592 0.522449 8.359184 1.044898 13.061225v3.134694H705.306122c-2.089796-49.632653-10.971429-98.220408-26.644898-145.240817 36.571429-17.240816 70.008163-39.706122 99.787756-67.395918 31.346939 36.571429 55.902041 79.412245 71.053061 126.955102z m14.106122 140.538776c0 1.567347-0.522449 3.134694-0.522449 4.70204l-1.567347 12.538776c0 1.567347-0.522449 2.612245-0.522449 4.179592-0.522449 4.702041-1.567347 8.881633-2.612245 13.583673 0 1.044898-0.522449 2.089796-0.522449 2.612245-1.044898 4.702041-2.089796 9.926531-3.134693 14.628572 0 0.522449-0.522449 1.044898-0.522449 1.567347-1.567347 5.22449-2.612245 10.44898-4.702041 15.673469-14.628571 47.542857-39.183673 90.383673-71.053061 126.955102-29.779592-27.689796-63.216327-50.155102-99.787756-67.395918 16.195918-47.020408 25.077551-95.608163 26.644898-145.240817h159.346939v3.134694c-0.522449 4.702041-0.522449 8.881633-1.044898 13.061225z m-221.518367 114.416326c-35.526531-12.538776-72.620408-19.853061-110.759184-21.420408v-108.669388h134.269388c-1.044898 44.408163-9.404082 87.771429-23.510204 130.089796z m-110.236735-169.795918V384c37.616327-2.089796 74.710204-8.881633 110.759184-21.420408 14.106122 41.795918 21.942857 85.681633 24.032653 130.089796h-134.791837z m0-147.330612V182.334694c40.75102 41.273469 73.665306 90.383673 96.653061 143.673469-31.346939 10.44898-63.738776 16.718367-96.653061 18.808164z m-39.706122 0c-34.481633-2.089796-67.918367-8.881633-100.310204-20.89796 24.032653-54.857143 57.991837-104.489796 100.832653-146.808163V344.816327z m-114.938776 15.673469c37.093878 13.583673 75.232653 21.420408 114.938776 22.987755v108.669388H353.17551c1.567347-44.930612 9.926531-88.816327 24.032653-131.657143z m114.938776 171.363265v108.669388c-39.706122 2.089796-77.844898 9.926531-114.938776 22.987755-14.628571-42.318367-22.465306-86.726531-24.555102-131.657143h139.493878z m0 147.330612v167.183674c-42.318367-41.795918-76.8-91.95102-100.310204-146.285714 32.391837-12.016327 65.828571-18.808163 100.310204-20.89796z m39.706122 0c32.914286 1.567347 65.306122 8.359184 96.653061 18.808164-22.987755 53.289796-55.902041 101.877551-96.653061 143.673469V679.183673z m132.702041 33.959184c31.346939 15.15102 60.604082 34.481633 86.204082 58.514286-42.318367 38.661224-93.518367 67.395918-150.465306 82.02449-5.22449 1.567347-10.971429 2.612245-16.195919 3.657143-0.522449 0-1.044898 0-1.044898 0.522448-4.702041 1.044898-9.926531 2.089796-14.628571 2.612245 39.706122-42.840816 72.620408-92.995918 96.130612-147.330612z"
                fill="#DCF8FF" p-id="4397"></path>
            </svg>
            {{ $t('messages.language') }}<el-icon></el-icon>
          </el-button>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item style="font-size:18px; font-weight: bolder;" @click="changeLange('zh')">中文</el-dropdown-item>
              <el-dropdown-item style="font-size:18px; font-weight: bolder;" @click="changeLange('en')">English</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </div>
      <!-- 下拉菜单 -->
      <div>
        <el-dropdown>
          <span class="el-dropdown-link">
            <div>
              <el-avatar :src="headImg" />
            </div>
            <el-icon>
              <arrow-down />
            </el-icon>
          </span>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item style="font-size:18px; font-weight: bolder;" @click="toPage('person')">{{ $t('messages.personCenter') }}</el-dropdown-item>
              <!-- <el-dropdown-item>我的订单</el-dropdown-item> -->
              <!-- <el-dropdown-item @click="toPage('member')">{{ $t('messages.memberCenter') }}</el-dropdown-item> -->
              <!-- <el-dropdown-item>成为会员</el-dropdown-item> -->
              <el-dropdown-item style="font-size:18px; font-weight: bolder;" @click="logout">{{ $t('messages.logOut') }}</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </div>
    </div>
  </div>
</template>
<script setup lang="ts">
import { computed, ref, onMounted } from "vue";
import { useRouter } from "vue-router";
import { ArrowDown, Search, MessageBox, Star, Help, Loading, Document} from "@element-plus/icons-vue"
import { useI18n } from "vue-i18n";
const router = useRouter();
const currentRoute = computed(() => router.currentRoute.value);
const currentPath = computed(() => currentRoute.value.path);
// 计算屏幕宽度 用来判断是否要在手机端展示logo
const screenSize = computed(() => window.innerWidth);
// 头像地址
let headImg = ref('https://medseeker.genemed.tech/ask/report_css/helpimg/defaultAvatar.jpg');
// 语言切换
const { locale } = useI18n()
// 页面跳转
function toPage(page: string) {
  router.push({ name: page });
}
// 退出登陆
const logout = () => {
  // 1.删除token、user
  localStorage.removeItem("isAuthenticated");
  localStorage.removeItem("user");
  // 2.跳转路有到登陆页
  router.push({ name: "wxlogin" });
}
// 切换语言
const changeLange = (lang: string) => {
  locale.value = lang;
  localStorage.setItem('lang', lang);
}
// onMounted(() => {
//   headImg.value = JSON.parse(localStorage.getItem('user') || '').headImgurl;
//   console.log(headImg.value);
//   if(headImg.value === '') headImg.value = "https://medseeker.genemed.tech/ask/report_css/helpimg/defaultAvatar.jpg";
// })
onMounted(() => {
  const user = localStorage.getItem('user');
  if (user) {
    try {
      const userData = JSON.parse(user);
      headImg.value = userData.headImgurl || "https://medseeker.genemed.tech/ask/report_css/helpimg/defaultAvatar.jpg";
    } catch (error) {
      // console.error("解析 user 数据失败:", error);
      headImg.value = "https://medseeker.genemed.tech/ask/report_css/helpimg/defaultAvatar.jpg";
    }
  } else {
    headImg.value = "https://medseeker.genemed.tech/ask/report_css/helpimg/defaultAvatar.jpg";
  }
  // console.log(headImg.value);
});
</script>

<style scoped>
.container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  overflow: auto;
}

.menu-container {
  display: flex;
  align-items: center;
  width: 100%;
  overflow: auto;
  margin-top: 10px;
  
}

.logo img {
  max-width: 300px;
  /* 设置图片的最大宽度 */
  max-height: 300px;
  /* 设置图片的最大高度 */
  margin-right: 1%;
  overflow: auto;
}

.el-menu {
  font-family: "Arial Black", "Arial Bold", "Arial";
  font-weight: bold;
  flex-grow: 1;
  margin-left: 3%;
  background: linear-gradient(to top, #ecf5ff0b, #ffffff00, #ecf5ff00)
  /* background: linear-gradient(to top, #ecf5ff, #ffffff, #ecf5ff) !important; */
}

.el-menu--horizontal {
  border-bottom: none;
}

.el-dropdown-link {
  cursor: pointer;
  color: var(--el-color-primary);
  display: flex;
  align-items: center;
}

.rounded-button {
  border-radius: 20px;
  padding: 1px 1px;
  width: 100px;
  font-size: large;
}

.selecLanguage {
  display: flex;
  margin-top: 5px;
  margin-right: 10px;
}
</style>